@page "/admin/overzicht/offerte-aanvragen"
@using shared.Quotations
@attribute [Authorize]

<PageTitle>Offertes Overzicht</PageTitle>
<MudContainer Fixed="true" Class="mt-16 mb-16">
    <MudDataGrid Items="@Quotations" Filterable="false" SortMode="@SortMode.None" Groupable="false" data-test-id="admin-quotations-grid">
        <Columns>
            <PropertyColumn Property="x => x.Customer.FirstName" Title="Voornaam"/>
            <PropertyColumn Property="x => x.Customer.LastName"  Title="Naam"/>
            <PropertyColumn Property="x => x.Customer.Email" />
            <PropertyColumn Property="x => x.CreatedAt" Title="Gemaakt op"/>
            <TemplateColumn CellClass="d-flex justify-end">
                <CellTemplate>
                    <MudStack Row>
                        <MudButton data-test-id="admin-quotations-overview-editbutton" Size="@Size.Small" Variant="@Variant.Filled" Color="@Color.Primary">Wijzig</MudButton>
                    </MudStack>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
                <MudDataGridPager T="QuotationDto.Index" />
            </PagerContent>
    </MudDataGrid>
</MudContainer>

@code {
    [Inject]
    public IQuotationService QuotationService { get; set; } = default!;
    
    private IEnumerable<QuotationDto.Index>? Quotations = default!;
    
    protected override async Task OnInitializedAsync()
    {
        QuotationResult.Index response = await QuotationService.GetIndexAsync();

        Quotations = response.Quotation;      
    }
}
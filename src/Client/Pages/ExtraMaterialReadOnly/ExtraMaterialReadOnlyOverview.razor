@page "/ExtraMaterialReadOnly"
@using shared.Equipment
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager

<PageTitle>Bekijken extra's</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large">
    <MudGrid Justify="Justify.SpaceEvenly">
        <MudItem lg="1" md="1" sm="12" xs="12">

        </MudItem>
        <MudItem lg="4" md="5" sm="12" xs="12">
            <MudText Class="mt-6" Typo="Typo.h4">Overzicht extra materiaal</MudText>
        </MudItem>
        <MudItem lg="7" md="6" sm="12" xs="12">

        </MudItem>
        <MudItem lg="1" md="12" sm="12" xs="12">

        </MudItem>
        <MudItem lg="10" md="12" sm="12" xs="12">
            <MudGrid>
                @if (Extras is null)
                {
                    <MudText>Loading...</MudText>
                }
                else
                {
                    @foreach (EquipmentDto.Index item in Extras)
                    {
                        <MudItem lg="3" md="4" sm="6" xs="12">
                            <ExtraItemsReadOnlyCard
                              Title="@item.Title"  
                              Attributes="@item.Attributes"
                              Price="@item.Price"
                              Stock="@item.Stock"
                              ImageUrl="@item.ImageData.ImageUrl"
                            >

                            </ExtraItemsReadOnlyCard>
                        </MudItem>
                    }
                }
            </MudGrid>
        </MudItem>
        <MudItem lg="1" md="12" sm="12" xs="12">

        </MudItem>
        <MudItem lg="8" md="8" sm="5" xs="5">

        </MudItem>
            <MudItem lg="3" md="3" sm="7" xs="7">
                <MudButton OnClick="GoToHomePage" Class="mb-6" Variant="Variant.Filled" Color="Color.Primary">Ga terug naar thuis pagina</MudButton>
            </MudItem>
            <MudItem lg="1" md="1" sm="12" xs="12">

            </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [Inject]
    public IEquipmentService EquipmentService { get; set; } = default!;

    private IEnumerable<EquipmentDto.Index>? Extras = default!;

    private bool Loading { get; set; } = true;

    protected override async Task OnInitializedAsync()
    {
        EquipmentResult.Index response = await EquipmentService.GetIndexAsync();

        Extras = response.Equipment;

        Loading = false;

    }

    private void GoToHomePage()
    {
        NavigationManager.NavigateTo("/");
    }

}